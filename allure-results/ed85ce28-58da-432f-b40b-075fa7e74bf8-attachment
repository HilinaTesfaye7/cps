# Instructions

- Following Playwright test failed.
- Explain why, be concise, respect Playwright best practices.
- Provide a snippet of code with the fix, if possible.

# Test info

- Name: test
- Location: C:\Users\ENVY\Documents\cps Automation\tests\authorized\department_edit.spec.js:4:1

# Error details

```
Error: locator.waitFor: Error: strict mode violation: locator('//div[@class=\'w-full flex gap-2 items-center justify-center cursor-pointer\']/*[name()=\'svg\']') resolved to 10 elements:
    1) <svg width="24" fill="none" height="24" stroke-width="2" viewBox="0 0 24 24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg" class="p-1 bg-[#F2F2F2] text-primary rounded-full cursor-pointer">…</svg> aka getByRole('row', { name: 'Abraham TESTkk March 13, 2025' }).getByRole('img')
    2) <svg width="24" fill="none" height="24" stroke-width="2" viewBox="0 0 24 24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg" class="p-1 bg-[#F2F2F2] text-primary rounded-full cursor-pointer">…</svg> aka getByRole('row', { name: 'IT Support March 12, 2025' }).getByRole('img')
    3) <svg width="24" fill="none" height="24" stroke-width="2" viewBox="0 0 24 24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg" class="p-1 bg-[#F2F2F2] text-primary rounded-full cursor-pointer">…</svg> aka getByRole('row', { name: 'ITICSA March 12, 2025' }).getByRole('img')
    4) <svg width="24" fill="none" height="24" stroke-width="2" viewBox="0 0 24 24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg" class="p-1 bg-[#F2F2F2] text-primary rounded-full cursor-pointer">…</svg> aka getByRole('row', { name: 'dash March 6, 2025' }).getByRole('img')
    5) <svg width="24" fill="none" height="24" stroke-width="2" viewBox="0 0 24 24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg" class="p-1 bg-[#F2F2F2] text-primary rounded-full cursor-pointer">…</svg> aka getByRole('row', { name: 'Cyber Seurity I&R December 23, 2024' }).getByRole('img')
    6) <svg width="24" fill="none" height="24" stroke-width="2" viewBox="0 0 24 24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg" class="p-1 bg-[#F2F2F2] text-primary rounded-full cursor-pointer">…</svg> aka getByRole('row', { name: '190156504792006 Cyber' }).getByRole('img')
    7) <svg width="24" fill="none" height="24" stroke-width="2" viewBox="0 0 24 24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg" class="p-1 bg-[#F2F2F2] text-primary rounded-full cursor-pointer">…</svg> aka getByRole('row', { name: 'kazna December 20, 2024' }).getByRole('img')
    8) <svg width="24" fill="none" height="24" stroke-width="2" viewBox="0 0 24 24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg" class="p-1 bg-[#F2F2F2] text-primary rounded-full cursor-pointer">…</svg> aka getByRole('row', { name: 'Digital Team December 20, 2024' }).getByRole('img')
    9) <svg width="24" fill="none" height="24" stroke-width="2" viewBox="0 0 24 24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg" class="p-1 bg-[#F2F2F2] text-primary rounded-full cursor-pointer">…</svg> aka getByRole('row', { name: 'ELST Test December 18, 2024' }).getByRole('img')
    10) <svg width="24" fill="none" height="24" stroke-width="2" viewBox="0 0 24 24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg" class="p-1 bg-[#F2F2F2] text-primary rounded-full cursor-pointer">…</svg> aka getByRole('row', { name: 'Cyber December 17, 2024' }).getByRole('img')

Call log:
  - waiting for locator('//div[@class=\'w-full flex gap-2 items-center justify-center cursor-pointer\']/*[name()=\'svg\']') to be visible

    at C:\Users\ENVY\Documents\cps Automation\tests\authorized\department_edit.spec.js:79:17
```

# Page snapshot

```yaml
- main:
  - heading "Dashen Bank Super App Central Dashboard Portal" [level=4]
  - text: B
  - paragraph: binim
  - text: MAKER
  - img
  - img
  - paragraph: Department
  - button "Add Department":
    - img
    - text: Add Department
  - link "Back to Home"
  - text: "Total Department Count:"
  - paragraph: "12"
  - img
  - textbox: Abraham Testk
  - button:
    - img
  - button:
    - img
  - table:
    - rowgroup:
      - row "Department Code Department Name Create Date Action":
        - columnheader "Department Code"
        - columnheader "Department Name"
        - columnheader "Create Date"
        - columnheader "Action"
    - rowgroup:
      - row "9694662375012 Abraham TESTkk March 13, 2025":
        - cell "9694662375012":
          - paragraph: "9694662375012"
        - cell "Abraham TESTkk":
          - paragraph: Abraham TESTkk
        - cell "March 13, 2025":
          - paragraph: March 13, 2025
        - cell:
          - img
      - row "669042694807338 IT Support March 12, 2025":
        - cell "669042694807338":
          - paragraph: "669042694807338"
        - cell "IT Support":
          - paragraph: IT Support
        - cell "March 12, 2025":
          - paragraph: March 12, 2025
        - cell:
          - img
      - row "599642348999718 ITICSA March 12, 2025":
        - cell "599642348999718":
          - paragraph: "599642348999718"
        - cell "ITICSA":
          - paragraph: ITICSA
        - cell "March 12, 2025":
          - paragraph: March 12, 2025
        - cell:
          - img
      - row "68213377328015 dash March 6, 2025":
        - cell "68213377328015":
          - paragraph: "68213377328015"
        - cell "dash":
          - paragraph: dash
        - cell "March 6, 2025":
          - paragraph: March 6, 2025
        - cell:
          - img
      - row "194509515519702 Cyber Seurity I&R December 23, 2024":
        - cell "194509515519702":
          - paragraph: "194509515519702"
        - cell "Cyber Seurity I&R":
          - paragraph: Cyber Seurity I&R
        - cell "December 23, 2024":
          - paragraph: December 23, 2024
        - cell:
          - img
      - row "190156504792006 Cyber Security Administration December 23, 2024":
        - cell "190156504792006":
          - paragraph: "190156504792006"
        - cell "Cyber Security Administration":
          - paragraph: Cyber Security Administration
        - cell "December 23, 2024":
          - paragraph: December 23, 2024
        - cell:
          - img
      - row "6775772311446 kazna December 20, 2024":
        - cell "6775772311446":
          - paragraph: "6775772311446"
        - cell "kazna":
          - paragraph: kazna
        - cell "December 20, 2024":
          - paragraph: December 20, 2024
        - cell:
          - img
      - row "6298812135654 Digital Team December 20, 2024":
        - cell "6298812135654":
          - paragraph: "6298812135654"
        - cell "Digital Team":
          - paragraph: Digital Team
        - cell "December 20, 2024":
          - paragraph: December 20, 2024
        - cell:
          - img
      - row "58709921436381 ELST Test December 18, 2024":
        - cell "58709921436381":
          - paragraph: "58709921436381"
        - cell "ELST Test":
          - paragraph: ELST Test
        - cell "December 18, 2024":
          - paragraph: December 18, 2024
        - cell:
          - img
      - row "108785294049633 Cyber December 17, 2024":
        - cell "108785294049633":
          - paragraph: "108785294049633"
        - cell "Cyber":
          - paragraph: Cyber
        - cell "December 17, 2024":
          - paragraph: December 17, 2024
        - cell:
          - img
  - text: "Rows per page:"
  - button "10" [expanded]:
    - text: "10"
    - img
  - listbox "10":
    - option "5"
    - option "10" [selected]
    - option "20"
    - option "50"
    - option "100"
    - option "500"
  - list:
    - listitem "Previous Page":
      - img
    - listitem "1"
    - listitem "2"
    - listitem "Next Page":
      - img
- region "Notifications alt+T"
- alert
```

# Test source

```ts
   1 |
   2 | const { test, expect } = require('@playwright/test');
   3 |
   4 | test('test', async ({ page }) => {
   5 |   // Variable to store the OTP
   6 |   let otp = null;
   7 |
   8 |   // Listen for network responses
   9 |   page.on('response', async (response) => {
  10 |     const url = response.url(); // Get the URL of the response
  11 |
  12 |     // Check if the response URL matches the specific endpoint
  13 |     if (url.includes('https://sau.eaglelionsystems.com/v1.0/chatbirrapi/cpsauth/otp/request/dashops')) {
  14 |       console.log(`Response URL: ${url}`);
  15 |
  16 |       // Get the response body as JSON
  17 |       try {
  18 |         const responseBody = await response.json(); // Parse the response body as JSON
  19 |         console.log('Response Body:', responseBody);
  20 |
  21 |         // Extract the OTP from the response body
  22 |         if (responseBody.otpcode) {
  23 |           otp = responseBody.otpcode; // Assuming the OTP is in a field named "otpcode"
  24 |           console.log(`OTP: ${otp}`);
  25 |         } else {
  26 |           console.error('OTP not found in the response body.');
  27 |         }
  28 |       } catch (error) {
  29 |         console.error('Failed to parse response body as JSON:', error);
  30 |       }
  31 |     }
  32 |   });
  33 |
  34 |   // Navigate to the login page
  35 |   await page.goto('https://sau-dbsa.vercel.app');
  36 |
  37 |   // Enter the username and request OTP
  38 |   await page.getByPlaceholder('Enter Your username').click();
  39 |   await page.getByPlaceholder('Enter Your username').fill('binim');
  40 |   await page.getByRole('button', { name: 'Get OTP' }).click();
  41 |
  42 |   // Wait for the OTP to be captured (adjust timeout as needed)
  43 |   await page.waitForTimeout(5000); // Wait for 5 seconds
  44 |
  45 |   // Check if the OTP was captured
  46 |   if (!otp) {
  47 |     throw new Error('OTP was not captured from the network response.');
  48 |   }
  49 |
  50 |   // Split the OTP into individual digits
  51 |   const otpDigits = otp.split('');
  52 |   if (otpDigits.length !== 6) {
  53 |     throw new Error('OTP must be 6 digits long.');
  54 |   }
  55 |
  56 |   // Fill the OTP into the input boxes
  57 |   for (let i = 0; i < 6; i++) {
  58 |     const inputSelector = `.rizzui-pin-code-field:nth-child(${i + 1})`;
  59 |     await page.locator(inputSelector).fill(otpDigits[i]);
  60 |   }
  61 |
  62 |   // Click the "Next" button
  63 |   await page.getByRole('button', { name: 'Next' }).click();
  64 |
  65 |   // Enter the password and sign in
  66 |   await page.getByPlaceholder('Enter Your Password').click();
  67 |   await page.getByPlaceholder('Enter Your Password').fill('Admin@7');
  68 |   
  69 |
  70 |   await page.getByRole('button', { name: 'Sign In' }).click();
  71 |   await page.getByRole('link', { name: 'Departments Departments Set' }).click();
  72 |   await page.getByPlaceholder('Search department by name').click();
  73 |   await page.getByPlaceholder('Search department by name').fill('Abraham Testk');
  74 |   await page.getByRole('button').nth(2).click();
  75 |
  76 |   const svgIcon = await page.locator("//div[@class='w-full flex gap-2 items-center justify-center cursor-pointer']/*[name()='svg']");
  77 |
  78 |   // Wait until visible before clicking
> 79 |   await svgIcon.waitFor({ state: 'visible' });
     |                 ^ Error: locator.waitFor: Error: strict mode violation: locator('//div[@class=\'w-full flex gap-2 items-center justify-center cursor-pointer\']/*[name()=\'svg\']') resolved to 10 elements:
  80 |   
  81 |   // Click it
  82 |   await svgIcon.click();
  83 |   
  84 |   
  85 |
  86 |   await page.getByPlaceholder('Enter Department Name').click();
  87 |   await page.getByPlaceholder('Enter Department Name').fill('Abraham TESTkk');
  88 |   await page.getByRole('button', { name: 'Submit' }).click();
  89 |   await page.waitForTimeout(5000);
  90 | });
  91 | ////div[@class='w-full flex gap-2 items-center justify-center cursor-pointer']//*[name()='svg']
```